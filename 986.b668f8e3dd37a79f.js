"use strict";(self.webpackChunkkfeoch02=self.webpackChunkkfeoch02||[]).push([[986],{5633:(Te,N,a)=>{a.r(N),a.d(N,{AdminLawyersModule:()=>ye});var l=a(6895),d=a(9116),c=a(4210),R=a(4280),x=a(3468),Y=a(1773),D=a(9391),h=a(5035),e=a(4650),u=a(9777),I=a(3184),F=a(445),y=a(3267),b=a(3683),v=a(6338),G=a(3238),M=a(7392),m=a(9383),A=a(4859);function $(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(t),e.oxw();const s=e.MAs(3);return e.KtG("over"===s.mode&&s.close())}),e.TgZ(1,"span",8),e._uU(2),e.qZA(),e.TgZ(3,"h3",9),e._uU(4),e.qZA(),e.TgZ(5,"p",10),e._uU(6),e.qZA()()}if(2&i){const t=o.$implicit;e.Q6J("routerLink",t.routerLink),e.xp6(2),e.Oqu(t.icon),e.xp6(2),e.Oqu(t.title),e.xp6(2),e.hij(" ",t.subTitle," ")}}function Q(i,o){1&i&&(e.TgZ(0,"mat-icon"),e._uU(1,"chevron_left"),e.qZA())}function q(i,o){1&i&&(e.TgZ(0,"mat-icon"),e._uU(1,"chevron_right"),e.qZA())}let B=(()=>{class i{constructor(t,n,s){this.deviceService=t,this.languageService=n,this.accountService=s,this.isHandset=this.deviceService.isHandset$,this.dir=this.languageService.currentDirection$,this.routes=this.accountService.getRouteConfig(D._T)}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.U),e.Y36(h.Z),e.Y36(I.B))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-admin-lawyers-nav"]],decls:16,vars:12,consts:[[1,"office-side-nav2",3,"dir"],[3,"opened","mode"],["drawer",""],["translate",""],["mat-list-item","","routerLinkActive","office-home-active","style","height: 95px;",3,"routerLink","click",4,"ngFor","ngForOf"],["mat-icon-button","","color","primary",1,"float-drawer-toggle",3,"click"],[4,"ngIf"],["mat-list-item","","routerLinkActive","office-home-active",2,"height","95px",3,"routerLink","click"],["mat-list-icon","",1,"material-symbols-outlined"],["mat-line","","mat-h3","","translate","",1,"compact"],["mat-line","","translate","",1,"compact"]],template:function(t,n){if(1&t){const s=e.EpF();e.TgZ(0,"mat-sidenav-container",0),e.ALo(1,"async"),e.TgZ(2,"mat-sidenav",1,2),e.ALo(4,"async"),e.ALo(5,"async"),e.TgZ(6,"mat-toolbar")(7,"span",3),e._uU(8,"Lawyers"),e.qZA()(),e.TgZ(9,"mat-action-list"),e.YNc(10,$,7,4,"button",4),e.qZA()(),e.TgZ(11,"mat-sidenav-content")(12,"button",5),e.NdJ("click",function(){e.CHM(s);const S=e.MAs(3);return e.KtG(S.toggle())}),e.YNc(13,Q,2,0,"mat-icon",6),e.YNc(14,q,2,0,"mat-icon",6),e.qZA(),e._UZ(15,"router-outlet"),e.qZA()()}if(2&t){const s=e.MAs(3);e.Q6J("dir","ltr"===e.lcZ(1,6,n.dir)?"ltr":"rtl"),e.xp6(2),e.Q6J("opened",!e.lcZ(4,8,n.isHandset)||"false")("mode",e.lcZ(5,10,n.isHandset)?"over":"side"),e.xp6(8),e.Q6J("ngForOf",n.routes),e.xp6(3),e.Q6J("ngIf",s.opened),e.xp6(1),e.Q6J("ngIf",!s.opened)}},dependencies:[l.sg,l.O5,d.lC,d.rH,d.Od,F.Lv,y.JX,y.TM,y.Rh,b.Ye,v.i$,v.Tg,G.X2,v.Nh,M.Hw,m.Pi,A.lW,l.Ov],styles:[".compact[_ngcontent-%COMP%]{line-height:1.5}"]}),i})();var H=a(9751),w=a(3900),g=a(7206),C=a(6090),J=a(1607);let P=(()=>{class i{constructor(t,n,s,r){this.deviceService=t,this.languageService=n,this.lawyerService=s,this.router=r,this.isHandset=this.deviceService.isHandset$,this.data=new H.y,this.dataSize=this.lawyerService.lawyerSize$,this.columnsDef=g.RG.nonHandset,this.isLoading=this.lawyerService.isLawyerLoading,this.language$=this.languageService.currentLanguage$,this.selectFilters=[]}ngOnInit(){this.isHandset.subscribe(t=>{this.columnsDef=t?g.RG.handset:g.RG.nonHandset})}changeBinding(t){this.data=t.pipe((0,w.w)(n=>(this.filter=n,this.lawyerService.getLawyersByFilter(n))))}goToOffice(t){this.router.navigateByUrl("/kfeoch-admin/lawyers/list/"+t.Id)}exportExcel(){this.lawyerService.exportLawyersByFilter(this.filter).subscribe(t=>{let n=t.type,s=[];s.push(t);let r=document.createElement("a");r.href=window.URL.createObjectURL(new Blob(s,{type:n})),r.setAttribute("download","OfficeData.xlsx"),document.body.appendChild(r),r.click()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.U),e.Y36(h.Z),e.Y36(C.S),e.Y36(d.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-lawyers-list"]],decls:10,vars:14,consts:[[1,"office-home-content",3,"ngClass"],["translate","",1,"mat-h1"],["translate","",1,"mat-h3"],["translate","",1,"no-margin"],[3,"selectFiltersCols","language$","data","dataSize","columnsDef","isLoading","havePaging","isObservableFilter","clickable","bindingChanged","rowClicked","exportClick"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.ALo(1,"async"),e.TgZ(2,"h1",1),e._uU(3," Law Offices List "),e.qZA(),e.TgZ(4,"h3",2),e._uU(5," List & Filter all registered law offices "),e.qZA(),e.TgZ(6,"p",3),e._uU(7," Click on a law office to manage "),e.qZA(),e.TgZ(8,"app-dynamic-data-table",4),e.NdJ("bindingChanged",function(r){return n.changeBinding(r)})("rowClicked",function(r){return n.goToOffice(r)})("exportClick",function(){return n.exportExcel()}),e.ALo(9,"async"),e.qZA()()),2&t&&(e.Q6J("ngClass",e.lcZ(1,10,n.isHandset)?"office-home-content-handset":""),e.xp6(8),e.Q6J("selectFiltersCols",e.lcZ(9,12,n.isHandset)?1:4)("language$",n.language$)("data",n.data)("dataSize",n.dataSize)("columnsDef",n.columnsDef)("isLoading",n.isLoading)("havePaging",!0)("isObservableFilter",!0)("clickable",!0))},dependencies:[l.mk,m.Pi,J.j,l.Ov]}),i})();var p=a(5698);let z=(()=>{class i{constructor(t,n,s,r){this.lawyerService=t,this.languageService=n,this.deviceService=s,this.router=r,this.lawyers=new H.y,this.isHandset=this.deviceService.isHandset$,this.isLoading=this.lawyerService.isLoading,this.columns=[],this.language$=this.languageService.currentLanguage$}ngOnInit(){this.isHandset.pipe((0,p.q)(1)).subscribe(t=>{this.columns=t?g.RG.handset:g.RG.nonHandset,this.lawyers=this.lawyerService.getPendingLawyers()})}goToLawyer(t){this.router.navigateByUrl("/kfeoch-admin/lawyers/pending-requests/"+t.Id)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C.S),e.Y36(h.Z),e.Y36(u.U),e.Y36(d.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-lawyers-pending-requests"]],decls:9,vars:8,consts:[[1,"office-home-content",3,"ngClass"],["translate","",1,"mat-h1"],["translate","",1,"mat-h3"],["translate",""],[3,"data","language$","isLoading","columnsDef","clickable","rowClicked"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.ALo(1,"async"),e.TgZ(2,"h1",1),e._uU(3," Law Offices Pending Requests "),e.qZA(),e.TgZ(4,"h3",2),e._uU(5," List of all pending requests "),e.qZA(),e.TgZ(6,"p",3),e._uU(7," Click on request to show details "),e.qZA(),e.TgZ(8,"app-dynamic-data-table",4),e.NdJ("rowClicked",function(r){return n.goToLawyer(r)}),e.qZA()()),2&t&&(e.Q6J("ngClass",e.lcZ(1,6,n.isHandset)?"office-home-content-handset":""),e.xp6(8),e.Q6J("data",n.lawyers)("language$",n.language$)("isLoading",n.isLoading)("columnsDef",n.columns)("clickable",!0))},dependencies:[l.mk,m.Pi,J.j,l.Ov]}),i})();var X=a(5275),j=a(458),U=a(2973),Z=a(4004),V=a(1135),K=a(9841),W=a(8505),k=a(9300),_=a(6129),ee=a(1584),te=a(3346),ie=a(4476),ae=a(1572),E=a(782),ne=a(3218),se=a(7619),T=a(4006);function oe(i,o){if(1&i&&(e.TgZ(0,"mat-grid-tile")(1,"div",6),e._UZ(2,"app-select",15),e.ALo(3,"translate"),e.ALo(4,"translate"),e.ALo(5,"async"),e.ALo(6,"async"),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("formGroup",t.frm)("label",e.lcZ(3,6,"Destination"))("placeHolder",e.lcZ(4,8,"Select Destination"))("options",e.lcZ(5,10,t.destinations))("isLoading",e.lcZ(6,12,t.destinationsLoading))("optionDisplay","ar"===t.language?"NameArabic":"NameEnglish")}}function re(i,o){1&i&&(e.TgZ(0,"div",16),e._UZ(1,"mat-spinner",17),e.qZA())}function ce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"form",2),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.save())}),e.TgZ(1,"h1",3),e._uU(2," Request engineering office certificate "),e.qZA(),e.TgZ(3,"h3",4),e._uU(4),e.qZA(),e.TgZ(5,"p",4),e._uU(6," Add Your Request Fields "),e.qZA(),e.TgZ(7,"mat-grid-list",5),e.ALo(8,"async"),e.TgZ(9,"mat-grid-tile")(10,"div",6)(11,"app-select",7),e.NdJ("valueChanges",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.onRequesterTypeChange(s))}),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"mat-grid-tile")(14,"div",6),e._UZ(15,"app-input",8),e.ALo(16,"translate"),e.qZA()(),e.TgZ(17,"mat-grid-tile")(18,"div",6)(19,"app-select",9),e.NdJ("valueChanges",function(s){e.CHM(t);const r=e.oxw();return e.KtG(r.onSelectEntityChange(s))}),e.ALo(20,"translate"),e.ALo(21,"translate"),e.ALo(22,"async"),e.qZA()()(),e.YNc(23,oe,7,14,"mat-grid-tile",10),e.qZA(),e.YNc(24,re,2,0,"div",11),e.ALo(25,"async"),e.TgZ(26,"mat-grid-list",12)(27,"mat-grid-tile")(28,"div",6)(29,"button",13)(30,"span",14),e._uU(31,"Initiate Draft Request"),e.qZA()()()()()()}if(2&i){const t=e.oxw();e.Q6J("formGroup",t.frm),e.xp6(4),e.hij(" ",t.officeName," "),e.xp6(3),e.Q6J("cols",e.lcZ(8,18,t.isHandset)?1:2),e.xp6(4),e.Q6J("formGroup",t.frm)("label",e.lcZ(12,20,"Requester"))("options",t.requesters)("optionDisplay","ar"===t.language?"NameArabic":"NameEnglish"),e.xp6(4),e.Q6J("formGroup",t.frm)("label",e.lcZ(16,22,"Requester Name")),e.xp6(4),e.Q6J("formGroup",t.frm)("label",e.lcZ(20,24,"Entity Type"))("placeHolder",e.lcZ(21,26,"Select Entity type"))("options",t.certificateEntities)("isLoading",e.lcZ(22,28,t.certificateEntitiesLoading))("optionDisplay","ar"===t.language?"NameArabic":"NameEnglish"),e.xp6(4),e.Q6J("ngIf",t.entitySelected),e.xp6(1),e.Q6J("ngIf",e.lcZ(25,30,t.isLoading)),e.xp6(5),e.Q6J("disabled",t.frm.invalid)}}let le=(()=>{class i{constructor(t,n,s,r,S,ve,Le,Ae,we){this.deviceService=t,this.accountService=n,this.dictionaryService=s,this.route=r,this.router=S,this.lawyerService=ve,this.officeService=Le,this.languageService=Ae,this.confirm=we,this.isHandset=this.deviceService.isHandset$,this.officeId$=this.route.paramMap.pipe((0,p.q)(1),(0,Z.U)(L=>L.get("id")?(this.officeId=+L.get("id"),this.officeId):this.officeId??0)),this.requestTypes=this.dictionaryService.requestTypes,this.RequestTypeId="",this.isLoading=new V.X(!1),this.language=this.languageService.currentLanguage,this.certificateEntities$=(0,K.a)([this.dictionaryService.officeTypes,this.dictionaryService.certificateEntities,this.requestTypes]).pipe((0,Z.U)(([L,Ce,Ze])=>{const O=L?.find(f=>"lawyers"===f.NameEnglish?.toLowerCase())?.Id;this.reqType=Ze.find(f=>f.ParentId===O),this.certificateEntities=Ce?.filter(f=>f.ParentId===O)})),this.certificateEntitiesLoading=this.dictionaryService.certificateEntitiesLoading,this.departments=this.dictionaryService.lawyerDepartments,this.departmentsLoading=this.dictionaryService.lawyerDepartmentsLoading,this.courts=this.dictionaryService.lawyerCourts,this.courtsLoading=this.dictionaryService.lawyerCourtsLoading,this.requesters=[{Id:1,NameArabic:"\u0627\u0644\u0648\u0643\u064a\u0644",NameEnglish:"Agent"},{Id:2,NameArabic:"\u0627\u0644\u0645\u0648\u0627\u0637\u0646",NameEnglish:"Citizen"},{Id:3,NameArabic:"\u0627\u0644\u0645\u062f\u0639\u064a",NameEnglish:"Prosecutor"}],this.officeName=""}ngOnInit(){this.initiateNewLawyerOfficeCertificate()}initiateNewLawyerOfficeCertificate(){this.route.paramMap.pipe((0,p.q)(1),(0,Z.U)(t=>t.get("id")?(this.officeId=+t.get("id"),this.officeId):this.officeId??0),(0,w.w)(t=>this.officeService.getOfficeById(t).pipe((0,p.q)(1),(0,W.b)(n=>{this.officeName="ar"===this.language?n.NameArabic:n.NameEnglish,this.frm=this.lawyerService.createCertificateLawyerForm({LawyerId:0,OfficeId:t})}))),(0,w.w)(()=>this.certificateEntities$),(0,p.q)(1)).subscribe(()=>{this.frm.get("RequestTypeId")?.setValue(this.reqType?.Id)})}save(){this.frm.invalid||this.confirm.open({Type:"request"}).pipe((0,k.h)(t=>t),(0,_.z)(()=>this.lawyerService.postLawyerRequest(this.frm.getRawValue()))).subscribe(t=>{t&&this.router.navigateByUrl("/kfeoch-admin/lawyers/pending-certificates/"+t?.Id)})}onRequesterTypeChange(t){t&&this.frm.get("RequesterName")?.enable()}onSelectEntityChange(t){this.frm.get("DestinationId")?.setValue(null),this.entitySelected=this.certificateEntities?.find(n=>n.Id===t),this.destinations=void 0,"department"===this.entitySelected?.NameEnglish?.toLowerCase()?(this.destinations=this.departments,this.destinationsLoading=this.departmentsLoading):"court"===this.entitySelected?.NameEnglish?.toLowerCase()&&(this.destinations=this.courts,this.destinationsLoading=this.courtsLoading)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.U),e.Y36(I.B),e.Y36(ee.E),e.Y36(d.gz),e.Y36(d.F0),e.Y36(C.S),e.Y36(te.l),e.Y36(h.Z),e.Y36(ie.z))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-lawyer-admin-new-certificate"]],decls:3,vars:4,consts:[[1,"office-home-content",3,"ngClass"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],["translate","",1,"mat-h1"],["translate","",1,"mat-h3"],["rowHeight","75",3,"cols"],[1,"form-field-container"],["controlName","RequesterType","optionValue","Id",3,"formGroup","label","options","optionDisplay","valueChanges"],["controlName","RequesterName","type","text",3,"formGroup","label"],["controlName","CertificateEntityId","optionValue","Id",3,"formGroup","label","placeHolder","options","isLoading","optionDisplay","valueChanges"],[4,"ngIf"],["class","saving-data",4,"ngIf"],["rowHeight","60","cols","1",1,"actions-container"],["mat-raised-button","","color","primary",3,"disabled"],["translate",""],["controlName","DestinationId","optionValue","Id",3,"formGroup","label","placeHolder","options","isLoading","optionDisplay"],[1,"saving-data"],["diameter","30"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.ALo(1,"async"),e.YNc(2,ce,32,32,"form",1),e.qZA()),2&t&&(e.Q6J("ngClass",e.lcZ(1,2,n.isHandset)?"office-home-content-handset":""),e.xp6(2),e.Q6J("ngIf",n.frm))},dependencies:[l.mk,l.O5,m.Pi,A.lW,ae.Ou,E.Il,E.DX,ne.a,se.H,T._Y,T.JL,T.sg,l.Ov,m.X$]}),i})();var de=a(5320),me=a(5289);const ge=[{path:"",component:B,children:[{path:"",pathMatch:"full",redirectTo:"list"},{path:"list",component:P,canActivate:[c.a],data:{Roles:["Administrator","LawyerManager"]}},{path:"list/:id",component:X.a,canActivate:[c.a],data:{Roles:["Administrator","LawyerManager"]}},{path:"list/:id/security",component:me.P,canActivate:[c.a],data:{Roles:["Administrator","LawyerManager"]}},{path:"list/:id/attachments",component:R.h,canActivate:[c.a],data:{Roles:["Administrator","LawyerManager"]}},{path:"new-certificate",component:de.w,canActivate:[c.a],data:{Roles:["Administrator","LawyerManager"]}},{path:"new-certificate/:id",component:le,canActivate:[c.a],data:{Roles:["Administrator","LawyerManager"]}},{path:"pending-requests",component:z,canActivate:[c.a],data:{Roles:["Administrator","LawyerManager"]}},{path:"pending-requests/:id",component:R.h,canActivate:[c.a],data:{Roles:["Administrator","LawyerManager"]}},{path:"pending-certificates",component:j.Y,canActivate:[c.a],data:{Roles:["Administrator","LawyerManager"]}},{path:"pending-certificates/:id",component:U.b,canActivate:[c.a],data:{Roles:["Administrator","LawyerManager"]}},{path:"certificates",component:Y.g,canActivate:[c.a],data:{Roles:["Administrator","BillingManager"]}},{path:"certificates/:id",component:U.b,canActivate:[c.a],data:{Roles:["Administrator","BillingManager"]}},{path:"billing",component:x.G,canActivate:[c.a],data:{Roles:["Administrator","BillingManager"]}}]}];let pe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.Bz.forChild(ge),d.Bz]}),i})();var fe=a(5173),he=a(389),ue=a(4292);let ye=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[he.g,ue.f],imports:[l.ez,pe,y.SJ,b.g0,v.ie,M.Ps,m.aw,fe.t,A.ot]}),i})()}}]);