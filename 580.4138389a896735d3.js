"use strict";(self.webpackChunkkfeoch02=self.webpackChunkkfeoch02||[]).push([[580],{6580:(G,C,a)=>{a.r(C),a.d(C,{AdminCBTransactionsModule:()=>E});var r=a(6895),A=a(4859),T=a(7392),f=a(6338),g=a(3267),b=a(3683),u=a(9383),z=a(4292),H=a(389),U=a(5173),l=a(9116),h=a(4210),$=a(9391),p=a(5035),t=a(4650),v=a(9777),F=a(3184),k=a(445),J=a(3238);function M(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(n),t.oxw();const s=t.MAs(3);return t.KtG("over"===s.mode&&s.close())}),t.TgZ(1,"span",8),t._uU(2),t.qZA(),t.TgZ(3,"h3",9),t._uU(4),t.qZA(),t.TgZ(5,"p",10),t._uU(6),t.qZA()()}if(2&e){const n=o.$implicit;t.Q6J("routerLink",n.routerLink),t.xp6(2),t.Oqu(n.icon),t.xp6(2),t.Oqu(n.title),t.xp6(2),t.hij(" ",n.subTitle," ")}}function N(e,o){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"chevron_left"),t.qZA())}function Y(e,o){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"chevron_right"),t.qZA())}let x=(()=>{class e{constructor(n,i,s){this.deviceService=n,this.languageService=i,this.accountService=s,this.isHandset=this.deviceService.isHandset$,this.dir=this.languageService.currentDirection$,this.routes=this.accountService.getRouteConfig($.$N)}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(v.U),t.Y36(p.Z),t.Y36(F.B))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-admin-cb-transactions-nav"]],decls:16,vars:12,consts:[[1,"office-side-nav2",3,"dir"],[3,"opened","mode"],["drawer",""],["translate",""],["mat-list-item","","routerLinkActive","office-home-active","style","height: 95px;",3,"routerLink","click",4,"ngFor","ngForOf"],["mat-icon-button","","color","primary",1,"float-drawer-toggle",3,"click"],[4,"ngIf"],["mat-list-item","","routerLinkActive","office-home-active",2,"height","95px",3,"routerLink","click"],["mat-list-icon","",1,"material-symbols-outlined"],["mat-line","","mat-h3","","translate","",1,"compact"],["mat-line","","translate","",1,"compact"]],template:function(n,i){if(1&n){const s=t.EpF();t.TgZ(0,"mat-sidenav-container",0),t.ALo(1,"async"),t.TgZ(2,"mat-sidenav",1,2),t.ALo(4,"async"),t.ALo(5,"async"),t.TgZ(6,"mat-toolbar")(7,"span",3),t._uU(8,"Credit Bank"),t.qZA()(),t.TgZ(9,"mat-action-list"),t.YNc(10,M,7,4,"button",4),t.qZA()(),t.TgZ(11,"mat-sidenav-content")(12,"button",5),t.NdJ("click",function(){t.CHM(s);const m=t.MAs(3);return t.KtG(m.toggle())}),t.YNc(13,N,2,0,"mat-icon",6),t.YNc(14,Y,2,0,"mat-icon",6),t.qZA(),t._UZ(15,"router-outlet"),t.qZA()()}if(2&n){const s=t.MAs(3);t.Q6J("dir","ltr"===t.lcZ(1,6,i.dir)?"ltr":"rtl"),t.xp6(2),t.Q6J("opened",!t.lcZ(4,8,i.isHandset)||"false")("mode",t.lcZ(5,10,i.isHandset)?"over":"side"),t.xp6(8),t.Q6J("ngForOf",i.routes),t.xp6(3),t.Q6J("ngIf",s.opened),t.xp6(1),t.Q6J("ngIf",!s.opened)}},dependencies:[r.sg,r.O5,l.lC,l.rH,l.Od,k.Lv,g.JX,g.TM,g.Rh,b.Ye,f.i$,f.Tg,J.X2,f.Nh,T.Hw,u.Pi,A.lW,r.Ov]}),e})();var Z=a(9751),L=a(3900),d=a(9708),S=a(7376),y=a(1607);function R(e,o){1&e&&(t.TgZ(0,"div",9)(1,"span",10),t._uU(2,"* "),t.qZA(),t.TgZ(3,"span",6),t._uU(4," Certificates with gray color are rejected "),t.qZA()())}let B=(()=>{class e{constructor(n,i,s,c,m){this.deviceService=n,this.languageService=i,this.officeTransactionService=s,this.router=c,this.route=m,this.isHandset=this.deviceService.isHandset$,this.data=new Z.y,this.dataSize=this.officeTransactionService.officesTransactionsSize$,this.columnsDef=d.SK.nonHandset,this.isLoading=this.officeTransactionService.isOfficesTransactionsLoading,this.language$=this.languageService.currentLanguage$,this.isCompletedRoute=!1}ngOnInit(){this.dataSize.subscribe(n=>console.log(n)),this.isHandset.subscribe(n=>{this.columnsDef=n?d.SK.handset:d.SK.nonHandset}),this.isCompletedRoute="completed-certificates-list"===this.route.snapshot.url[0]?.path}changeBinding(n){this.data=n.pipe((0,L.w)(i=>(this.filter=i,this.officeTransactionService.getOfficesTransactionsByFilter(i,this.isCompletedRoute))))}goToTransaction(n){let i;i=n.Archived?"archived-list":this.isCompletedRoute?"completed-list":"ongoing-list",this.router.navigateByUrl(`/office/${n.OfficeId}/cb-transactions/${i}/${n.TransactionId}`)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(v.U),t.Y36(p.Z),t.Y36(S.V),t.Y36(l.F0),t.Y36(l.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-admin-cb-certificates-list"]],decls:15,vars:15,consts:[[1,"office-home-content",3,"ngClass"],["translate","",1,"mat-h1"],["translate","",1,"mat-h3"],["translate","",1,"no-margin"],[2,"font-size","14px","color","#8dd3fc","font-weight","bold","padding-left","20px","text-indent","-13px","margin-bottom","10px"],[2,"font-size","17px","color","#8dd3fc","font-weight","bold"],["translate",""],["style","font-size:14px;color:orangered;font-weight:bold;padding-left:20px;text-indent:-13px; margin-bottom:10px;",4,"ngIf"],[3,"CBCertificateFilter","language$","data","dataSize","columnsDef","isLoading","havePaging","isObservableFilter","clickable","bindingChanged","rowClicked"],[2,"font-size","14px","color","orangered","font-weight","bold","padding-left","20px","text-indent","-13px","margin-bottom","10px"],[2,"font-size","17px","color","orangered","font-weight","bold"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0),t.ALo(1,"async"),t.TgZ(2,"h1",1),t._uU(3),t.qZA(),t.TgZ(4,"h3",2),t._uU(5),t.qZA(),t.TgZ(6,"p",3),t._uU(7," Click on a transaction to view "),t.qZA(),t.TgZ(8,"div",4)(9,"span",5),t._uU(10,"* "),t.qZA(),t.TgZ(11,"span",6),t._uU(12," Certificates with blue color are archived "),t.qZA()(),t.YNc(13,R,5,0,"div",7),t.TgZ(14,"app-dynamic-data-table",8),t.NdJ("bindingChanged",function(c){return i.changeBinding(c)})("rowClicked",function(c){return i.goToTransaction(c)}),t.qZA()()),2&n&&(t.Q6J("ngClass",t.lcZ(1,13,i.isHandset)?"office-home-content-handset":""),t.xp6(3),t.hij(" ",i.isCompletedRoute?"List Of Completed Certificates":"List Of Ongoing Certificates"," "),t.xp6(2),t.hij(" ",i.isCompletedRoute?"List & filter completed offices transactions certificates":"List & filter ongoing offices transactions certificates"," "),t.xp6(8),t.Q6J("ngIf",!i.isCompletedRoute),t.xp6(1),t.Q6J("CBCertificateFilter",!0)("language$",i.language$)("data",i.data)("dataSize",i.dataSize)("columnsDef",i.columnsDef)("isLoading",i.isLoading)("havePaging",!0)("isObservableFilter",!0)("clickable",!0))},dependencies:[r.mk,r.O5,u.Pi,y.j,r.Ov]}),e})();var Q=a(5698),D=a(9300),I=a(6129),O=a(9646),j=a(4476);const K=[{path:"",component:x,children:[{path:"",pathMatch:"full",redirectTo:"certificates-list"},{path:"certificates-list",component:B,canActivate:[h.a],data:{Roles:["Administrator","OfficeManager"]}},{path:"completed-certificates-list",component:B,canActivate:[h.a],data:{Roles:["Administrator","OfficeManager"]}},{path:"blocked-auth-list",component:(()=>{class e{constructor(n,i,s,c,m){this.deviceService=n,this.languageService=i,this.officeTransactionService=s,this.router=c,this.confirm=m,this.isHandset=this.deviceService.isHandset$,this.data=new Z.y,this.dataSize=this.officeTransactionService.blockedAuthTransactionsSize$,this.columnsDef=d.sQ.nonHandset,this.isLoading=this.officeTransactionService.isOfficesTransactionsLoading,this.language$=this.languageService.currentLanguage$,this.actionsHeader="Unblock"}ngOnInit(){this.dataSize.subscribe(n=>console.log(n)),this.isHandset.subscribe(n=>{this.columnsDef=n?d.sQ.handset:d.sQ.nonHandset})}changeBinding(n){this.data=n.pipe((0,L.w)(i=>(this.filter=i,this.officeTransactionService.getBlockedAuthTransactions(i))))}terminateAuth(n){this.confirm.open({Type:"unblock auth"}).pipe((0,Q.q)(1),(0,D.h)(i=>i),(0,I.z)(()=>n.Id?this.officeTransactionService.unblockAuth(n.Id):(0,O.of)(!1))).subscribe(i=>{i&&this.changeBinding((0,O.of)(this.filter))})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(v.U),t.Y36(p.Z),t.Y36(S.V),t.Y36(l.F0),t.Y36(j.z))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-admin-cb-blocked-auth-list"]],decls:9,vars:13,consts:[[1,"office-home-content",3,"ngClass"],["translate","",1,"mat-h1"],["translate","",1,"mat-h3"],["translate","",1,"no-margin"],[3,"CBCertificateFilter","actionsHeader","language$","data","dataSize","columnsDef","isLoading","havePaging","isObservableFilter","btn1","bindingChanged","btn1Click"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0),t.ALo(1,"async"),t.TgZ(2,"h1",1),t._uU(3," Blocked Auth List "),t.qZA(),t.TgZ(4,"h3",2),t._uU(5," List & filter blocked auth transactions "),t.qZA(),t.TgZ(6,"p",3),t._uU(7," Click unblock transaction to unblock "),t.qZA(),t.TgZ(8,"app-dynamic-data-table",4),t.NdJ("bindingChanged",function(c){return i.changeBinding(c)})("btn1Click",function(c){return i.terminateAuth(c)}),t.qZA()()),2&n&&(t.Q6J("ngClass",t.lcZ(1,11,i.isHandset)?"office-home-content-handset":""),t.xp6(8),t.Q6J("CBCertificateFilter",!0)("actionsHeader",i.actionsHeader)("language$",i.language$)("data",i.data)("dataSize",i.dataSize)("columnsDef",i.columnsDef)("isLoading",i.isLoading)("havePaging",!0)("isObservableFilter",!0)("btn1","close"))},dependencies:[r.mk,u.Pi,y.j,r.Ov]}),e})(),canActivate:[h.a],data:{Roles:["Administrator","OfficeManager"]}}]}];let X=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[l.Bz.forChild(K),l.Bz]}),e})(),E=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[H.g,z.f],imports:[r.ez,X,g.SJ,b.g0,f.ie,T.Ps,u.aw,U.t,A.ot]}),e})()}}]);