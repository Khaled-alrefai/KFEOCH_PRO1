"use strict";(self.webpackChunkkfeoch02=self.webpackChunkkfeoch02||[]).push([[199],{2199:(fe,N,a)=>{a.r(N),a.d(N,{OfficeMembershipsModule:()=>re});var r=a(6895),p=a(9116),g=a(4004),u=a(3900),O=a(9300),x=a(6129),v=a(5035),e=a(4650),y=a(9777),C=a(3184),I=a(1242),E=a(4476),m=a(6338),L=a(3238),P=a(4850),Z=a(7392),T=a(4859),f=a(9383),d=a(782),M=a(1572),b=a(389),S=a(4292);function H(i,s){if(1&i&&(e.TgZ(0,"mat-list-item")(1,"p",13)(2,"mat-icon"),e._uU(3,"payments"),e.qZA()(),e.TgZ(4,"p",14),e._uU(5),e.ALo(6,"async"),e.qZA(),e.TgZ(7,"p",14),e._uU(8),e.ALo(9,"localizedCurrency"),e.qZA()()),2&i){const t=s.$implicit,n=e.oxw(2);e.xp6(5),e.hij("","ar"===e.lcZ(6,2,n.language$)?t.RequestNameArabic:t.RequestNameEnglish,":"),e.xp6(3),e.Oqu(e.lcZ(9,4,t.Amount))}}function w(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",4)(1,"h4",5)(2,"span",6),e._uU(3,"Membership Status"),e.qZA(),e._uU(4),e.ALo(5,"async"),e.qZA(),e.TgZ(6,"h4",5)(7,"span",6),e._uU(8,"Membership Expiry Date"),e.qZA(),e._uU(9),e.ALo(10,"localizedDate"),e.qZA(),e.TgZ(11,"h4",5)(12,"span",6),e._uU(13,"Membership Will Extend To"),e.qZA(),e._uU(14),e.ALo(15,"localizedDate"),e.qZA(),e.TgZ(16,"mat-list",7),e.YNc(17,H,10,6,"mat-list-item",8),e._UZ(18,"mat-divider"),e.TgZ(19,"mat-list-item",9)(20,"span",6),e._uU(21,"Total Amount"),e.qZA(),e._uU(22),e.ALo(23,"localizedCurrency"),e.qZA()(),e.TgZ(24,"mat-grid-list",10)(25,"mat-grid-tile")(26,"div",11)(27,"button",12),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.renew())}),e.TgZ(28,"mat-icon"),e._uU(29,"refresh"),e.qZA(),e.TgZ(30,"span",6),e._uU(31,"RENEW"),e.qZA()()()()()()}if(2&i){const t=e.oxw();e.xp6(4),e.hij(": ","ar"===e.lcZ(5,5,t.language$)?t.paymentInfo.StatusNameArabic:t.paymentInfo.StatusNameEnglish,""),e.xp6(5),e.hij(": ",t.paymentInfo.CurrentMembershipEndDate?e.lcZ(10,7,t.paymentInfo.CurrentMembershipEndDate):"First Time",""),e.xp6(5),e.hij(": ",t.paymentInfo.NextMembershipEndDate?e.lcZ(15,9,t.paymentInfo.NextMembershipEndDate):"",""),e.xp6(3),e.Q6J("ngForOf",t.paymentInfo.Payments),e.xp6(5),e.hij(": ",e.lcZ(23,11,t.paymentInfo.TotalAmount)," ")}}function Y(i,s){1&i&&(e.TgZ(0,"div",15),e._UZ(1,"mat-spinner",16),e.TgZ(2,"span",6),e._uU(3,"Loading Membership Information.."),e.qZA()())}let J=(()=>{class i{constructor(t,n,o,c,l,h){this.deviceService=t,this.languageService=n,this.accountService=o,this.licenseService=c,this.route=l,this.confirm=h,this.language$=this.languageService.currentLanguage$,this.isHandset=this.deviceService.isHandset$,this.officeId=this.accountService.getOfficeId(),this.isLoadingPayments=this.licenseService.isLoadingPayments$}ngOnInit(){this.route.parent?.parent?.parent?.paramMap.pipe((0,g.U)(t=>t.get("id")?(this.officeId=+t.get("id"),this.officeId):this.officeId??0),(0,u.w)(()=>this.licenseService.getRenewInfoByOffice(this.officeId))).subscribe(t=>this.paymentInfo=t)}renew(){this.confirm.open({Type:"renew"}).pipe((0,O.h)(t=>t),(0,x.z)(()=>this.licenseService.renewOfficeKpay(this.officeId,this.languageService.currentLanguage))).subscribe(t=>window.open(t.PaymentUrl,"_self"))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(y.U),e.Y36(v.Z),e.Y36(C.B),e.Y36(I.d),e.Y36(p.gz),e.Y36(E.z))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-membership-info"]],decls:8,vars:9,consts:[[1,"office-home-content",3,"ngClass"],["translate","",1,"mat-h1"],["style","margin-top: 40px",4,"ngIf"],["style","width:100%; display: flex; flex-direction: column; align-items: center;",4,"ngIf"],[2,"margin-top","40px"],[1,"mat-h5"],["translate",""],["dense",""],[4,"ngFor","ngForOf"],[1,"mat-h3"],["rowHeight","60","cols","1",1,"actions-container"],[1,"half-form-field-container"],["mat-raised-button","","color","primary",3,"click"],["matListIcon",""],["matLine",""],[2,"width","100%","display","flex","flex-direction","column","align-items","center"],["diameter","40"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.ALo(1,"async"),e.TgZ(2,"h1",1),e._uU(3," Membership Information "),e.qZA(),e.YNc(4,w,32,13,"div",2),e.ALo(5,"async"),e.YNc(6,Y,4,0,"div",3),e.ALo(7,"async"),e.qZA()),2&t&&(e.Q6J("ngClass",e.lcZ(1,3,n.isHandset)?"office-home-content-handset":""),e.xp6(4),e.Q6J("ngIf",n.paymentInfo&&!e.lcZ(5,5,n.isLoadingPayments)),e.xp6(2),e.Q6J("ngIf",e.lcZ(7,7,n.isLoadingPayments)))},dependencies:[r.mk,r.sg,r.O5,m.i$,m.Tg,L.X2,m.Nh,P.d,Z.Hw,T.lW,f.Pi,d.Il,d.DX,M.Ou,r.Ov,b.g,S.f]}),i})();var $=a(445),A=a(3267),R=a(3683);function D(i,s){1&i&&(e.TgZ(0,"mat-icon"),e._uU(1,"chevron_left"),e.qZA())}function z(i,s){1&i&&(e.TgZ(0,"mat-icon"),e._uU(1,"chevron_right"),e.qZA())}let F=(()=>{class i{constructor(t,n){this.deviceService=t,this.languageService=n,this.isHandset=this.deviceService.isHandset$,this.dir=this.languageService.currentDirection$}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(y.U),e.Y36(v.Z))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-office-memberships-nav"]],decls:29,vars:11,consts:[[1,"office-side-nav2",3,"dir"],[3,"opened","mode"],["drawer",""],["translate",""],["mat-list-item","","routerLinkActive","office-home-active","routerLink","membership",3,"click"],["mat-list-icon","",1,"material-symbols-outlined"],["mat-line","","mat-h3","","translate",""],["mat-line","","translate",""],["mat-list-item","","routerLinkActive","office-home-active","routerLink","payments",3,"click"],["mat-icon-button","","color","primary",1,"float-drawer-toggle",3,"click"],[4,"ngIf"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"mat-sidenav-container",0),e.ALo(1,"async"),e.TgZ(2,"mat-sidenav",1,2),e.ALo(4,"async"),e.ALo(5,"async"),e.TgZ(6,"mat-toolbar")(7,"span",3),e._uU(8,"Office Membership"),e.qZA()(),e.TgZ(9,"mat-action-list")(10,"button",4),e.NdJ("click",function(){e.CHM(o);const l=e.MAs(3);return e.KtG("over"===l.mode&&l.close())}),e.TgZ(11,"span",5),e._uU(12,"refresh"),e.qZA(),e.TgZ(13,"h3",6),e._uU(14,"Membership Information"),e.qZA(),e.TgZ(15,"p",7),e._uU(16," Check My Membership Information "),e.qZA()(),e.TgZ(17,"button",8),e.NdJ("click",function(){e.CHM(o);const l=e.MAs(3);return e.KtG("over"===l.mode&&l.close())}),e.TgZ(18,"span",5),e._uU(19,"history"),e.qZA(),e.TgZ(20,"h3",6),e._uU(21,"My Renewals"),e.qZA(),e.TgZ(22,"p",7),e._uU(23," List & view my renewals "),e.qZA()()()(),e.TgZ(24,"mat-sidenav-content")(25,"button",9),e.NdJ("click",function(){e.CHM(o);const l=e.MAs(3);return e.KtG(l.toggle())}),e.YNc(26,D,2,0,"mat-icon",10),e.YNc(27,z,2,0,"mat-icon",10),e.qZA(),e._UZ(28,"router-outlet"),e.qZA()()}if(2&t){const o=e.MAs(3);e.Q6J("dir","ltr"===e.lcZ(1,5,n.dir)?"ltr":"rtl"),e.xp6(2),e.Q6J("opened",!e.lcZ(4,7,n.isHandset)||"false")("mode",e.lcZ(5,9,n.isHandset)?"over":"side"),e.xp6(24),e.Q6J("ngIf",o.opened),e.xp6(1),e.Q6J("ngIf",!o.opened)}},dependencies:[r.O5,p.lC,p.rH,p.Od,$.Lv,A.JX,A.TM,A.Rh,R.Ye,m.i$,m.Tg,L.X2,m.Nh,Z.Hw,T.lW,f.Pi,r.Ov]}),i})();var q=a(6225),Q=a(1607);let j=(()=>{class i{constructor(t,n,o,c,l,h){this.route=t,this.accountService=n,this.deviceService=o,this.languageService=c,this.licenseService=l,this.router=h,this.officeId=this.accountService.getOfficeId(),this.isHandset=this.deviceService.isHandset$,this.isLoading=this.licenseService.isLoading$,this.columns=[],this.language$=this.languageService.currentLanguage$}ngOnInit(){this.isHandset.subscribe(t=>{this.columns=t?q.nV.handset:q.nV.nonHandset}),this.payments=this.route.parent?.parent?.parent?.paramMap.pipe((0,g.U)(t=>t.get("id")?(this.officeId=+t.get("id"),this.officeId):this.officeId??0),(0,u.w)(()=>this.licenseService.getRenewPaymentsByOfficeId(this.officeId)))}goToPayment(t){this.router.navigateByUrl("/printables/payments/"+t.Id)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.gz),e.Y36(C.B),e.Y36(y.U),e.Y36(v.Z),e.Y36(I.d),e.Y36(p.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-payments-list"]],decls:9,vars:8,consts:[[1,"office-home-content",3,"ngClass"],["translate","",1,"mat-h1"],["translate","",1,"mat-h3"],["translate","",1,"no-margin"],[3,"language$","data","isLoading","columnsDef","clickable","rowClicked"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.ALo(1,"async"),e.TgZ(2,"h1",1),e._uU(3," My Renewals "),e.qZA(),e.TgZ(4,"h3",2),e._uU(5," List & view my renewals "),e.qZA(),e.TgZ(6,"p",3),e._uU(7," Click on a renewal to show more information "),e.qZA(),e.TgZ(8,"app-dynamic-data-table",4),e.NdJ("rowClicked",function(c){return n.goToPayment(c)}),e.qZA()()),2&t&&(e.Q6J("ngClass",e.lcZ(1,6,n.isHandset)?"office-home-content-handset":""),e.xp6(8),e.Q6J("language$",n.language$)("data",n.payments)("isLoading",n.isLoading)("columnsDef",n.columns)("clickable",!0))},dependencies:[r.mk,Q.j,f.Pi,r.Ov]}),i})();var X=a(8505),B=a(8024),G=a(1058),K=a(1584),U=a(4006),W=a(7619);function V(i,s){if(1&i&&(e.TgZ(0,"mat-list-item")(1,"p",17)(2,"mat-icon"),e._uU(3,"payments"),e.qZA()(),e.TgZ(4,"p",18),e._uU(5),e.ALo(6,"async"),e.qZA(),e.TgZ(7,"p",18),e._uU(8),e.ALo(9,"localizedCurrency"),e.qZA()()),2&i){const t=s.$implicit,n=e.oxw(2);e.xp6(5),e.hij("","ar"===e.lcZ(6,2,n.language$)?t.RequestNameArabic:t.RequestNameEnglish,":"),e.xp6(3),e.Oqu(e.lcZ(9,4,t.Amount))}}function k(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",9)(1,"h4",10)(2,"span",2),e._uU(3,"Membership Status"),e.qZA(),e._uU(4),e.ALo(5,"async"),e.qZA(),e.TgZ(6,"h4",10)(7,"span",2),e._uU(8,"Membership Expiry Date"),e.qZA(),e._uU(9),e.ALo(10,"localizedDate"),e.qZA(),e.TgZ(11,"h4",10)(12,"span",2),e._uU(13,"Membership Will Extend To"),e.qZA(),e._uU(14),e.ALo(15,"localizedDate"),e.qZA(),e.TgZ(16,"mat-list",11),e.YNc(17,V,10,6,"mat-list-item",12),e._UZ(18,"mat-divider"),e.TgZ(19,"mat-list-item",13)(20,"span",2),e._uU(21,"Total Amount"),e.qZA(),e._uU(22),e.ALo(23,"localizedCurrency"),e.qZA()(),e.TgZ(24,"mat-grid-list",14)(25,"mat-grid-tile")(26,"div",15)(27,"button",16),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.renew())}),e.TgZ(28,"mat-icon"),e._uU(29,"refresh"),e.qZA(),e.TgZ(30,"span",2),e._uU(31,"RENEW"),e.qZA()()()()()()}if(2&i){const t=e.oxw();e.xp6(4),e.hij(": ","ar"===e.lcZ(5,6,t.language$)?t.paymentInfo.StatusNameArabic:t.paymentInfo.StatusNameEnglish,""),e.xp6(5),e.hij(": ",t.paymentInfo.CurrentMembershipEndDate?e.lcZ(10,8,t.paymentInfo.CurrentMembershipEndDate):"First Time",""),e.xp6(5),e.hij(": ",t.paymentInfo.NextMembershipEndDate?e.lcZ(15,10,t.paymentInfo.NextMembershipEndDate):"",""),e.xp6(3),e.Q6J("ngForOf",t.paymentInfo.Payments),e.xp6(5),e.hij(": ",e.lcZ(23,12,t.paymentInfo.TotalAmount)," "),e.xp6(5),e.Q6J("disabled",t.frm.invalid)}}function _(i,s){1&i&&(e.TgZ(0,"div",19),e._UZ(1,"mat-spinner",20),e.TgZ(2,"span",2),e._uU(3,"Loading Membership Information.."),e.qZA()())}const ee=[{path:"",component:F,children:[{path:"",pathMatch:"full",redirectTo:"membership"},{path:"membership",component:J},{path:"membership-certifacte",component:(()=>{class i{constructor(t,n,o,c,l,h,le,me,pe){this.deviceService=t,this.languageService=n,this.accountService=o,this.licenseService=c,this.specialityService=l,this.certificateService=h,this.dictionaryService=le,this.route=me,this.confirm=pe,this.language$=this.languageService.currentLanguage$,this.isHandset=this.deviceService.isHandset$,this.officeId=this.accountService.getOfficeId(),this.requestTypes=this.dictionaryService.requestTypes,this.requestTypesLoading=this.dictionaryService.requestTypesLoading,this.certificateEntities=this.dictionaryService.certificateEntities,this.certificateEntitiesLoading=this.dictionaryService.certificateEntitiesLoading,this.price=0,this.RequestType=[],this.certificateType=[],this.officeSpecialities=[],this.officeSpecialitiesLoading=this.specialityService.isLoadingEligible,this.isLoadingPayments=this.licenseService.isLoadingPayments$}ngOnInit(){this.route.parent?.parent?.parent?.paramMap.pipe((0,g.U)(t=>t.get("id")?(this.officeId=+t.get("id"),this.officeId):this.officeId??0),(0,u.w)(()=>this.licenseService.getRenewInfoByOffice(this.officeId))).subscribe(t=>this.paymentInfo=t),this.getCertifiacte()}getCertifiactePrice(t){this.price+=this.frm.value.RequestTypeId}getSelectEntity(t){}getCertifiacte(){this.route.parent?.parent?.parent?.paramMap.pipe((0,g.U)(t=>t.get("id")?(this.officeId=+t.get("id"),this.officeId):this.officeId??0),(0,X.b)(t=>{this.frm=this.certificateService.createMembershipRenewForm(this.officeId,null)}),(0,u.w)(t=>this.dictionaryService.httpGetRequestTypes())).subscribe(t=>this.RequestType=t)}renew(){this.confirm.open({Type:"renw-request"}).pipe((0,O.h)(t=>t),(0,x.z)(()=>this.licenseService.renewRequestOfficeKpay(this.officeId,this.frm.value.RequestTypeId,this.frm.value.CertificateEntityId,this.languageService.currentLanguage))).subscribe(t=>window.open(t.PaymentUrl,"_self"))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(y.U),e.Y36(v.Z),e.Y36(C.B),e.Y36(I.d),e.Y36(B.i),e.Y36(G.Q),e.Y36(K.E),e.Y36(p.gz),e.Y36(E.z))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-paymnet-renwal-certificat"]],decls:29,vars:45,consts:[[1,"office-home-content",3,"ngClass"],["translate","",1,"mat-h1"],["translate",""],["rowHeight","75",3,"cols"],[1,"form-field-container"],["controlName","RequestTypeId","optionValue","Id",3,"formGroup","label","placeHolder","options","isMulty","isLoading","optionDisplay","valueChanges"],["controlName","CertificateEntityId","optionValue","Id",3,"formGroup","label","placeHolder","options","isLoading","optionDisplay","valueChanges"],["style","margin-top: 40px",4,"ngIf"],["style","width:100%; display: flex; flex-direction: column; align-items: center;",4,"ngIf"],[2,"margin-top","40px"],[1,"mat-h5"],["dense",""],[4,"ngFor","ngForOf"],[1,"mat-h3"],["rowHeight","60","cols","1",1,"actions-container"],[1,"half-form-field-container"],["mat-raised-button","","color","primary",3,"disabled","click"],["matListIcon",""],["matLine",""],[2,"width","100%","display","flex","flex-direction","column","align-items","center"],["diameter","40"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.ALo(1,"async"),e.TgZ(2,"h1",1),e._uU(3," Membership and Certificate Information "),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"h10",2),e._uU(6," Please Select one Certificate at least"),e.qZA(),e.TgZ(7,"mat-grid-list",3),e.ALo(8,"async"),e.TgZ(9,"mat-grid-tile")(10,"div",4)(11,"app-select",5),e.NdJ("valueChanges",function(c){return n.getCertifiactePrice(c)}),e.ALo(12,"translate"),e.ALo(13,"translate"),e.ALo(14,"async"),e.ALo(15,"async"),e.ALo(16,"async"),e.qZA()()(),e.TgZ(17,"mat-grid-tile")(18,"div",4)(19,"app-select",6),e.NdJ("valueChanges",function(c){return n.getSelectEntity(c)}),e.ALo(20,"translate"),e.ALo(21,"translate"),e.ALo(22,"async"),e.ALo(23,"async"),e.ALo(24,"async"),e.qZA()()()(),e.YNc(25,k,32,14,"div",7),e.ALo(26,"async"),e.YNc(27,_,4,0,"div",8),e.ALo(28,"async"),e.qZA()),2&t&&(e.Q6J("ngClass",e.lcZ(1,17,n.isHandset)?"office-home-content-handset":""),e.xp6(7),e.Q6J("cols",e.lcZ(8,19,n.isHandset)?1:2),e.xp6(4),e.Q6J("formGroup",n.frm)("label",e.lcZ(12,21,"Request Type"))("placeHolder",e.lcZ(13,23,"Select Request Type"))("options",e.lcZ(14,25,n.requestTypes))("isMulty",!0)("isLoading",e.lcZ(15,27,n.requestTypesLoading))("optionDisplay","ar"===e.lcZ(16,29,n.language$)?"NameArabic":"NameEnglish"),e.xp6(8),e.Q6J("formGroup",n.frm)("label",e.lcZ(20,31,"Certificate Entity"))("placeHolder",e.lcZ(21,33,"Select Certificate Entity"))("options",e.lcZ(22,35,n.certificateEntities))("isLoading",e.lcZ(23,37,n.certificateEntitiesLoading))("optionDisplay","ar"===e.lcZ(24,39,n.language$)?"NameArabic":"NameEnglish"),e.xp6(6),e.Q6J("ngIf",n.paymentInfo&&!e.lcZ(26,41,n.isLoadingPayments)),e.xp6(2),e.Q6J("ngIf",e.lcZ(28,43,n.isLoadingPayments)))},dependencies:[r.mk,r.sg,r.O5,m.i$,m.Tg,L.X2,m.Nh,P.d,Z.Hw,T.lW,f.Pi,U.JL,U.sg,d.Il,d.DX,W.H,M.Ou,r.Ov,f.X$,b.g,S.f]}),i})()},{path:"payments",component:j}]}];let te=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.Bz.forChild(ee),p.Bz]}),i})();var ie=a(5173),ne=a(9549),ae=a(4144),se=a(4385),oe=a(4466),ce=a(9596);let re=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[b.g,S.f],imports:[r.ez,te,ie.t,A.SJ,R.g0,m.ie,Z.Ps,T.ot,ne.lN,ae.c,se.LD,f.aw,U.UX,d.N6,oe.m,ce.w,M.Cq]}),i})()}}]);